<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous" />
  <link rel="stylesheet" href="/css/profile.css" />
  <title>APPerfectDay</title>
  <script src="/js/utils.js"></script>
</head>

<body>
  <div class="container-flex">
    <!--NavBar-->
    <%- include('includes/navbar', { user: user }); %>
    <div class="row m-0">
      <div class="row">
        <div class="col-4"></div>
        <div class="col-4">
        <div class="form-group mt-2">
          <label for="nombreActividad">Nombre Actividad</label>
          <input type="text" class="form-control" id="nombreActividad" required value="<%= activity.titulo %>" />
        </div>
        <div class="form-group mt-1">
          <label for="fechaActividad">fecha</label>
          <input type="date" class="form-control" id="fechaActividad" required value="<%= activity.dia %>"/>
        </div>
        <div class="form-group mt-1">
          <label for="horaInicioActividad">Hora inicio</label>
          <input type="time" class="form-control" id="horaInicioActividad" required value="<%= activity.inicio %>"/>
        </div>
        <div class="form-group mt-1">
          <label for="horaFinActividad">Hora Fin</label>
          <input type="time" class="form-control" id="horaFinActividad" required value="<%= activity.fin %>"/>
        </div>
      </div>
        <div class="col-4"></div>
        </div>
      
      
      <div class="row">
          <div class="col-5"></div>
          <div class="col-1"><button id="btnGuardarAsignatura" type="button" class="btn btn-primary mt-3" style="width: 6em;">Guardar</button></div>
          <div class="col-1"><form id="formDeleteSubject" action="/activity/<%= activity.id %>/remove" method="post">
          <button type="submit" class="btn btn-danger mt-3" style="width: 6em;">Borrar</button>
        </form>
        <div id="errorAsignatura" class="mt-3"></div></div>
          <div class="col-5"></div>

        
        </div>
    </div>
  </div>
  <script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
 <!-- <script>
   /* (() => {
      $("#formDeleteSubject").on("submit", (ev) => {
        if (!confirm("¿Seguro que quieres borrar la asignatura?")) {
          ev.preventDefault();
        }
      });


      let modifyActivityRunning = false;
      $("#btnGuardarAsignatura").on("click", (ev) => {
        if (modifyActivityRunning) return;
        modifyActivityRunning = true;
        const nombre = $("#nombreAsignatura").val();
        const numCreditos = Number($("#numCreditos option:selected").text());
        const horario = [];
        $("#horarioAsignatura").children().each((i) => {
          horario.push({
            dia: Number($(`#diaSemanaAsignatura${i} option:selected`).val()),
            inicio: $(`#horaInicioAsignatura${i}`).val(),
            fin: $(`#horaFinAsignatura${i}`).val(),
          });
        });
        fetch(new URL("/subject/<%= activity.id %>", window.location.origin), {
          method: 'post',
          body: JSON.stringify({
            nombre,
            numCreditos,
            horario,
          }),
          headers: {
            "content-type": "application/json"
          }
        }).then((res) => {
          if (res.status >= 400) {
            // TODO error
            console.error("FALLO!!!!");
            $("#errorAsignatura").text("Ocurrió un error al crear la asignatura");
          } else {
            // TODO exito
            window.location.reload();
          }
          addActivityRunning = false;
        }).catch((err) => {
          console.log(err);
          $("#errorAsignatura").text("Ocurrió un error al crear la asignatura");
          addActivityRunning = false;
        });
      });
    })(); */
  </script> -->
</body>

</html>